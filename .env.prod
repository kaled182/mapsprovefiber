# ====================================================
# üõ∞Ô∏è  MAPSPROVEFIBER ‚Äî CONFIGURA√á√ÉO DE PRODU√á√ÉO
# ====================================================

# ----------------------------------------------------
# üîß Django Core & Identifica√ß√£o
# ----------------------------------------------------
DJANGO_SETTINGS_MODULE=settings.prod
DEBUG=False
PRODUCTION=True
SECRET_KEY=<sua-chave-super-segura-gerada>

# Metadados da aplica√ß√£o
APP_NAME=mapsprovefiber
APP_VERSION=v1.0.0
APP_ENVIRONMENT=production
DEPLOYMENT_ID=${CI_COMMIT_SHA:-unknown}

# Hosts e CSRF
ALLOWED_HOSTS=mapsprovefiber.com,www.mapsprovefiber.com,api.mapsprovefiber.com
CSRF_TRUSTED_ORIGINS=https://mapsprovefiber.com,https://www.mapsprovefiber.com,https://api.mapsprovefiber.com

# Timezone / Language
LANGUAGE_CODE=pt-br
TIME_ZONE=America/Belem

# ----------------------------------------------------
# üóÑÔ∏è Banco de Dados (MariaDB / MySQL)
# ----------------------------------------------------
DB_HOST=db-prod
DB_PORT=3306
DB_NAME=mapsprovefiber_prod
DB_USER=mapsprovefiber_user
DB_PASSWORD=<senha_segura_banco>
DB_CONN_MAX_AGE=300

# SSL Database (opcional)
DB_SSL_CA=/ssl/ca-cert.pem
DB_SSL_VERIFY=true

# ----------------------------------------------------
# ‚öôÔ∏è Cache / Redis
# ----------------------------------------------------
REDIS_URL=redis://redis-prod:6379/1
CACHE_DEFAULT_TIMEOUT=300
CACHE_PAGE_TIMEOUT=600

# ----------------------------------------------------
# ‚úâÔ∏è E-mail (SMTP)
# ----------------------------------------------------
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=alerts@mapsprovefiber.com
EMAIL_HOST_PASSWORD=<senha_ou_app_token>
EMAIL_USE_TLS=true
EMAIL_TIMEOUT=30
DEFAULT_FROM_EMAIL=alerts@mapsprovefiber.com
SERVER_EMAIL=alerts@mapsprovefiber.com

# ----------------------------------------------------
# üîí Seguran√ßa
# ----------------------------------------------------
SECURE_SSL_REDIRECT=true
USE_X_FORWARDED_HOST=true

# Cookies
SESSION_COOKIE_SAMESITE=Lax
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_AGE=1209600  # 2 semanas
CSRF_COOKIE_SECURE=true
CSRF_COOKIE_HTTPONLY=true

# HSTS
SECURE_HSTS_SECONDS=31536000           # 1 ano
SECURE_HSTS_INCLUDE_SUBDOMAINS=true
SECURE_HSTS_PRELOAD=true

# Headers de seguran√ßa
SECURE_REFERRER_POLICY=strict-origin-when-cross-origin
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true
X_FRAME_OPTIONS=DENY

# ----------------------------------------------------
# üß© Logging / Observabilidade
# ----------------------------------------------------
LOG_LEVEL=INFO
DJANGO_LOG_LEVEL=WARNING
LOG_FORMAT=json

# Prometheus metrics
PROMETHEUS_METRICS_ENABLED=true
PROMETHEUS_METRICS_PORT=8001

# ----------------------------------------------------
# ‚ö° Celery / Worker
# ----------------------------------------------------
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_ALWAYS_EAGER=false

# Worker performance
CELERY_WORKER_MAX_TASKS_PER_CHILD=100
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_SOFT_TIME_LIMIT=300
CELERY_TASK_TIME_LIMIT=600

# Queues espec√≠ficas
CELERY_DEFAULT_QUEUE=default
CELERY_TASK_ROUTES={"zabbix_api.tasks.*": {"queue": "zabbix"}, "routes_builder.tasks.*": {"queue": "maps"}}

# ----------------------------------------------------
# üß† Sentry (Monitoramento)
# ----------------------------------------------------
SENTRY_DSN=<sua_dsn_sentry>
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.05
SENTRY_PROFILES_SAMPLE_RATE=0.01
SENTRY_SEND_PII=false
SENTRY_RELEASE=${APP_VERSION}

# ----------------------------------------------------
# üß± Storage e Est√°ticos
# ----------------------------------------------------
STATIC_ROOT=/app/staticfiles
MEDIA_ROOT=/app/media
DATA_UPLOAD_MAX_MEMORY_SIZE=10485760    # 10MB
FILE_UPLOAD_MAX_MEMORY_SIZE=10485760

# CDN (opcional)
# AWS_S3_CUSTOM_DOMAIN=cdn.mapsprovefiber.com
# STATIC_URL=https://cdn.mapsprovefiber.com/static/

# ----------------------------------------------------
# üöÄ Health / Monitoramento interno
# ----------------------------------------------------
HEALTHCHECK_PATH=/ready
HEALTHCHECK_INTERVAL=30
HEALTHCHECK_TIMEOUT=10
HEALTHCHECK_DB_TIMEOUT=5
HEALTHCHECK_REDIS_TIMEOUT=3
HEALTHCHECK_DISK_THRESHOLD=90

# ----------------------------------------------------
# üîÑ Backup & Recovery
# ----------------------------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # 2 AM daily
BACKUP_RETENTION_DAYS=30
DB_BACKUP_DIR=/backups/database
MEDIA_BACKUP_DIR=/backups/media

# ----------------------------------------------------
# üß∞ Sistema & Runtime
# ----------------------------------------------------
TZ=UTC
PYTHONUNBUFFERED=1
PYTHONHASHSEED=random

# Gunicorn (se aplic√°vel)
WEB_CONCURRENCY=4
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100

# ====================================================
# üéØ CONFIGURA√á√ïES ESPEC√çFICAS DO MAPSPROVEFIBER
# ====================================================

# Zabbix API integration
ZABBIX_API_URL=https://zabbix.company.com/api_jsonrpc.php
ZABBIX_API_USER=monitoring_user
ZABBIX_API_PASSWORD=<zabbix_api_password>

# Maps/Geolocation services
MAPS_API_KEY=<google_maps_or_alternative_api_key>
GEOCODING_TIMEOUT=10
ROUTING_TIMEOUT=30

# Application-specific
FIBER_NETWORK_DATA_PATH=/data/fiber_network
MAX_CONCURRENT_ROUTE_CALCULATIONS=5